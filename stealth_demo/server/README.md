# Multi-Scheme Backend Server

é‡æ§‹å¾Œçš„æ¨¡å¡ŠåŒ–å¾Œç«¯æ¶æ§‹ï¼Œæ”¯æ´5å€‹å¯†ç¢¼å­¸æ–¹æ¡ˆçš„å‹•æ…‹åˆ‡æ›ã€‚

## ğŸ“ ç›®éŒ„çµæ§‹

```
server/
â”œâ”€â”€ app.py                 # ä¸»æ‡‰ç”¨å…¥å£é»
â”œâ”€â”€ app_factory.py         # Flaskæ‡‰ç”¨å·¥å» 
â”œâ”€â”€ config.py             # æ‡‰ç”¨é…ç½®å’Œç‹€æ…‹ç®¡ç†
â”œâ”€â”€ scheme_manager.py     # æ–¹æ¡ˆç®¡ç†å™¨ (æ ¸å¿ƒ)
â”œâ”€â”€ frontend_routes.py    # å‰ç«¯éœæ…‹æ–‡ä»¶æœå‹™
â”œâ”€â”€ api/                  # APIæ¨¡å¡Š
â”‚   â”œâ”€â”€ __init__.py      
â”‚   â”œâ”€â”€ routes.py        # ä¸»è¦APIè·¯ç”±
â”‚   â””â”€â”€ schemes.py       # æ–¹æ¡ˆç®¡ç†è·¯ç”±
â””â”€â”€ README.md            # æœ¬èªªæ˜æ–‡ä»¶
```

## ğŸš€ å•Ÿå‹•æ–¹å¼

```bash
# æ–¹å¼1: å¾é …ç›®æ ¹ç›®éŒ„é‹è¡Œ
python3 server/app.py

# æ–¹å¼2: å¾serverç›®éŒ„é‹è¡Œ (è‡ªå‹•åˆ‡æ›åˆ°é …ç›®æ ¹ç›®éŒ„)
cd server && python3 app.py
```

**æ™ºèƒ½è·¯å¾‘æª¢æ¸¬**: ç¨‹åºæœƒè‡ªå‹•æª¢æ¸¬é‹è¡Œä½ç½®ä¸¦åˆ‡æ›åˆ°æ­£ç¢ºçš„é …ç›®æ ¹ç›®éŒ„ï¼

## ğŸ“Š æ”¯æ´çš„æ–¹æ¡ˆ

| Scheme | Type | Functions | Status |
|--------|------|-----------|---------|
| my_stealth | PBC | 10 | âœ… Available |
| cryptonote2 | ECC | 7 | âœ… Available |
| zhao | ECC | 6 | âœ… Available |
| hdwsa | PBC | 8 | âœ… Available |
| sitaiba | PBC | 8 | âœ… Available |

## ğŸ”§ æ¨¡å¡Šèªªæ˜

### 1. `app.py` - ä¸»å…¥å£
- æª¢æŸ¥é‹è¡Œç’°å¢ƒ
- å‰µå»ºæ‡‰ç”¨å¯¦ä¾‹
- å•Ÿå‹•æœå‹™å™¨

### 2. `app_factory.py` - æ‡‰ç”¨å·¥å» 
- å‰µå»ºFlaskæ‡‰ç”¨
- è¨»å†Šæ‰€æœ‰è—åœ–
- é…ç½®CORSå’ŒéŒ¯èª¤è™•ç†
- æ‰“å°å•Ÿå‹•ä¿¡æ¯

### 3. `config.py` - é…ç½®ç®¡ç†
- æ‡‰ç”¨é…ç½®é¡ `Config`
- æ¼”ç¤ºç‹€æ…‹ç®¡ç†é¡ `DemoState`
- è·¯å¾‘é©—è­‰åŠŸèƒ½

### 4. `api/routes.py` - ä¸»è¦API
- `/api/status` - ç³»çµ±ç‹€æ…‹
- `/api/param_files` - åƒæ•¸æ–‡ä»¶åˆ—è¡¨
- `/api/setup` - ç³»çµ±åˆå§‹åŒ–
- `/api/keygen` - å¯†é‘°ç”Ÿæˆ
- `/api/keylist` - å¯†é‘°åˆ—è¡¨
- `/api/reset` - ç³»çµ±é‡ç½®

### 5. `api/schemes.py` - æ–¹æ¡ˆç®¡ç†API
- `/schemes` - ç²å–å¯ç”¨æ–¹æ¡ˆ
- `/schemes/<id>` - åˆ‡æ›æ–¹æ¡ˆ

### 6. `frontend_routes.py` - å‰ç«¯æœå‹™
- `/` - Reactæ‡‰ç”¨ä¸»é 
- `/<path>` - éœæ…‹æ–‡ä»¶æœå‹™

## ğŸ”Œ APIç«¯é»

### æ–¹æ¡ˆç®¡ç†
```
GET  /schemes           # ç²å–æ‰€æœ‰å¯ç”¨æ–¹æ¡ˆ
POST /schemes/{id}      # åˆ‡æ›åˆ°æŒ‡å®šæ–¹æ¡ˆ
```

### ç³»çµ±æ§åˆ¶
```
GET  /api/status        # ç³»çµ±ç‹€æ…‹
GET  /api/param_files   # åƒæ•¸æ–‡ä»¶åˆ—è¡¨
POST /api/setup         # åˆå§‹åŒ–ç³»çµ±
POST /api/reset         # é‡ç½®ç³»çµ±
```

### å¯†é‘°ç®¡ç†
```
GET  /api/keygen        # ç”Ÿæˆæ–°å¯†é‘°
GET  /api/keylist       # ç²å–å¯†é‘°åˆ—è¡¨
```

## ğŸ› ï¸ é–‹ç™¼æŒ‡å—

### æ·»åŠ æ–°çš„APIç«¯é»
1. åœ¨ `api/routes.py` ä¸­æ·»åŠ è·¯ç”±å‡½æ•¸
2. ä½¿ç”¨ `scheme_manager` å’Œ `demo_state` åƒæ•¸
3. è¿”å›æ¨™æº–JSONæ ¼å¼

### æ·»åŠ æ–°çš„æ–¹æ¡ˆæ”¯æ´
1. åœ¨ `c_src/` ä¸­æ·»åŠ æ–¹æ¡ˆç›®éŒ„
2. æ›´æ–° `scheme_manager.py` çš„ `SCHEMES` é…ç½®
3. ç·¨è­¯æ–°çš„å…±äº«åº«åˆ° `lib/`

### ä¿®æ”¹é…ç½®
1. åœ¨ `config.py` ä¸­æ›´æ–° `Config` é¡
2. è·¯å¾‘ã€ç·©è¡å€å¤§å°ç­‰è¨­ç½®éƒ½åœ¨é€™è£¡

## ğŸ§ª æ¸¬è©¦

```bash
# æª¢æŸ¥æ‰€æœ‰æ–¹æ¡ˆæ˜¯å¦å¯ç”¨
curl http://localhost:5000/schemes

# åˆ‡æ›åˆ°ç‰¹å®šæ–¹æ¡ˆ
curl -X POST http://localhost:5000/schemes/cryptonote2

# æª¢æŸ¥ç³»çµ±ç‹€æ…‹
curl http://localhost:5000/api/status
```